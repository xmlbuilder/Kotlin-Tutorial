#  Kotlin 스코프 & 형변환 정리

## 🔒 스코프 개요
스코프(Scope)는 변수의 생존 범위 또는 접근 가능 범위를 의미합니다.
| 위치 또는 구조     | 변수 생존 범위 또는 접근 가능 범위     |
|--------------------|----------------------------------------|
| 함수 내부          | 함수 전체에서 접근 가능                |
| if / when 블록     | 해당 블록 내부에서만 유효              |
| for / while 루프   | 루프 블록 내부에서만 유효              |
| 중첩 블록 `{}`     | 해당 블록 내부에서만 유효              |


### 📍 지역 변수와 생존 범위
```kotlin
fun main() {
    
    val m = 10 // main 블록 전체에서 접근 가능

    if (true) {
        val x = 20 // if 블록 내부에서만 접근 가능
        println("m = $m") // 가능
        println("x = $x") // 가능
    }

    println("m = $m") // 가능
    // println("x = $x") // 오류: x는 스코프 밖
}
```

- 지역 변수는 자신이 선언된 블록 안에서만 사용할 수 있습니다.

### 🎯 스코프 존재 이유
#### 문제점: 스코프가 넓은 경우
```kotlin
fun main() {
    val m = 10
    var temp = 0 // main 전체에서 접근 가능

    if (m > 0) {
        temp = m * 2
        println("temp = $temp")
    }
}
```
- ❌ 메모리 낭비
- ❌ 유지보수 어려움
#### 개선: 스코프가 좁은 경우
```kotlin
fun main() {
    val m = 10

    if (m > 0) {
        val temp = m * 2 // if 블록 내부에서만 접근 가능
        println("temp = $temp")
    }
}
```

- ✅ 메모리 효율
- ✅ 유지보수 용이

## 🔁 while vs for - 스코프 관점
### while문
```kotlin
var i = 1 // main 전체에서 접근 가능
val endNum = 3
var sum = 0

while (i <= endNum) {
    sum += i
    i++
}
```

### for문
```kotlin
val endNum = 3
var sum = 0

for (i in 1..endNum) {
    sum += i
}
```
- for문은 반복 변수의 스코프를 블록 내부로 제한할 수 있어 더 안전하고 깔끔합니다.

## 🔄 형변환 개요  
형변환(Type Casting)은 서로 다른 자료형 간의 변환을 의미합니다.   
| 변환 대상       | 형변환 방법 또는 함수       |
|----------------|-----------------------------|
| 정수 → 실수     | `toDouble()`                |
| 정수 → Long     | `toLong()`                  |
| 실수 → 정수     | `toInt()`                   |
| 모든 타입 → 다른 타입 | `as` (nullable 캐스팅에만 사용됨) |

- Kotlin에서는 명시적 형변환만 지원하며, 자동 형변환은 없습니다.


### ✅ 명시적 형변환
```kotlin
val intValue = 10
val longValue = intValue.toLong() // Int → Long
val doubleValue = intValue.toDouble() // Int → Double
```

- Kotlin은 명시적 변환 함수(toLong(), toDouble())를 사용합니다.

####  ✂️ 명시적 형변환 (값 손실)
```kotlin
val doubleValue = 1.5
val intValue = doubleValue.toInt() // Double → Int
println(intValue) // 출력: 1
```

- 소수점이 버려지고, 값이 손실될 수 있습니다.

### ⚠️ 형변환과 오버플로우
#### 정상 범위
```kotlin
val maxIntValue: Long = 2147483647
val intValue = maxIntValue.toInt()
println(intValue) // 2147483647
```

#### 초과 범위
```kotlin
val maxIntOver: Long = 2147483648
val intValue = maxIntOver.toInt()
println(intValue) // -2147483648 (오버플로우 발생)
```

- 오버플로우가 발생하면 전혀 다른 값이 저장됩니다. 반드시 타입을 넓혀서 방지해야 합니다.

### ➕ 계산과 형변환
Kotlin에서 서로 다른 타입끼리 계산하려면 명시적 형변환이 필요합니다.
```kotlin
val a = 3
val b = 2
val result = a.toDouble() / b // 1.5
```

#### 예제 비교
```kotlin
val div1 = 3 / 2           // 결과: 1
val div2 = 3 / 2.0         // 결과: 1.5
val div3 = 3.0 / 2         // 결과: 1.5
val div4 = (3).toDouble() / 2 // 결과: 1.5
```


## 📥 정리  
### 🔒 Kotlin 스코프 요약
| 위치 또는 구조     | 변수 생존 범위 또는 접근 가능 범위     |
|--------------------|----------------------------------------|
| 함수 내부          | 함수 전체에서 접근 가능                |
| if / when 블록     | 해당 블록 내부에서만 유효              |
| for / while 루프   | 루프 블록 내부에서만 유효              |
| 중첩 블록 `{}`     | 해당 블록 내부에서만 유효              |


### 📥 형변환 요약
| 변환 종류       | 예시                        | 사용 방법            | 손실 가능성 |
|----------------|-----------------------------|----------------------|--------------|
| 정수 → 실수     | `val d = 10.toDouble()`     | `toDouble()`         | 없음         |
| 정수 → Long     | `val l = 10.toLong()`       | `toLong()`           | 없음         |
| 실수 → 정수     | `val i = 3.7.toInt()`        | `toInt()`            | 있음 (소수점 제거) |
| 큰 타입 → 작은 타입 | `val b = 300.toByte()`     | `toByte()`, `toShort()` | 있음 (오버플로우 가능) |

### 💡 참고
- Kotlin은 자바와 달리 자동 형변환이 없기 때문에 항상 명시적으로 변환해야 해.
- as는 클래스 타입 캐스팅에만 사용되고, 기본 타입 변환에는 사용하지 않아.

---

# String 변환

String ↔ Int/Double 간의 형변환은 매우 자주 쓰이는 기능.  
아래에 문자열을 숫자로, 그리고 숫자를 문자열로 변환하는 방법을 깔끔하게 정리.

## 🔄 Kotlin 형변환: String ↔ Int / Double
### ✅ 1. String → Int / Double
| 변환 대상        | 변환 함수     | 예시 코드             | 예외 가능성 |
|------------------|---------------|------------------------|--------------|
| String → Int     | `toInt()`     | `"123".toInt()`        | 있음 (`NumberFormatException`) |
| String → Double  | `toDouble()`  | `"3.14".toDouble()`    | 있음 (`NumberFormatException`) |

```kotlin
val strInt = "42"
val numInt = strInt.toInt() // 42

val strDouble = "3.14"
val numDouble = strDouble.toDouble() // 3.14
```

#### ⚠️ 예외 주의
- 변환할 문자열이 숫자가 아니면 NumberFormatException 발생
```kotlin
val invalid = "abc".toInt() // ❌ 런타임 오류 발생
```

- 안전하게 처리하려면 toIntOrNull() / toDoubleOrNull() 사용
```kotlin
val safeInt = "abc".toIntOrNull() // null 반환
```


### ✅ 2. Int / Double → String
| 변환 대상        | 변환 함수     | 예시 코드             | 예외 가능성 |
|------------------|---------------|------------------------|--------------|
| Int → String     | `toString()`  | `42.toString()`        | 없음         |
| Double → String  | `toString()`  | `3.14.toString()`      | 없음         |
```kotlin
val numInt = 42
val strInt = numInt.toString() // "42"

val numDouble = 3.14
val strDouble = numDouble.toString() // "3.14"
```

## 📥 정리  
### 🔄 Kotlin 형변환 요약
| 변환 방향           | 사용 함수                         | 예시 코드               | 예외 가능성 |
|--------------------|----------------------------------|--------------------------|--------------|
| String → Int       | `toInt()` / `toIntOrNull()`      | `"123".toInt()`          | 있음 (`toInt`) |
| String → Double    | `toDouble()` / `toDoubleOrNull()`| `"3.14".toDouble()`      | 있음 (`toDouble`) |
| Int → String       | `toString()`                     | `42.toString()`          | 없음         |
| Double → String    | `toString()`                     | `3.14.toString()`        | 없음         |

----


