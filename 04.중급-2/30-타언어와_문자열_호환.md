# Kotlinê³¼ ë‹¤ ì–¸ì–´ê°„ ë¬¸ìì—´ í˜¸í™˜
Kotlinì€ Java ìœ„ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë¬¸ìì—´ ë‚´ë¶€ í‘œí˜„ì€ Javaì™€ ë™ì¼í•˜ê²Œ UTF-16ì…ë‹ˆë‹¤.  
ì¦‰, Stringì€ 16ë¹„íŠ¸ Char ë°°ì—´ë¡œ êµ¬ì„±ë˜ë©°, ë³´ì¡° ë¬¸ìëŠ” ì„œë¡œê²Œì´íŠ¸ í˜ì–´ë¡œ í‘œí˜„ë©ë‹ˆë‹¤.  
ì™¸ë¶€ ì–¸ì–´(Rust, C#, C++, Python ë“±)ì™€ êµí™˜í•  ë•ŒëŠ” UTF-8 ë³€í™˜ì„ ê±°ì¹˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.  

## ğŸ”¤ ì¸ì½”ë”© ì°¨ì´ ìš”ì•½

| ì–¸ì–´    | ë¬¸ìì—´ íƒ€ì…                  | ë¬¸ì ë‹¨ìœ„ íƒ€ì… | ë‚´ë¶€ ì¸ì½”ë”© |
|---------|------------------------------|----------------|-------------|
| Kotlin  | `String`, `CharArray`        | `Char` (16ë¹„íŠ¸) | UTF-16      |
| Rust    | `String`, `&str`, `Vec<u32>` | `char` (32ë¹„íŠ¸) | UTF-8 ê¸°ë³¸, UTF-32 (char ê¸°ë°˜) |
| Java    | `String`, `char[]`           | `char` (16ë¹„íŠ¸) | UTF-16      |


## ğŸ” í˜¸í™˜ ë°©ë²•
### âœ… Kotlin â†’ Rust
- Kotlinì—ì„œ UTF-16 ë¬¸ìì—´ì„ UTF-8 ë°”ì´íŠ¸ë¡œ ë³€í™˜
```kotlin
val str = "ğŸ˜€A"
val utf8Bytes = str.toByteArray(Charsets.UTF_8)
```

- Rustì—ì„œ UTF-8 ë°”ì´íŠ¸ë¥¼ UTF-32ë¡œ ë””ì½”ë”©
```rust
let utf8_bytes: &[u8] = ...; // Kotlinì—ì„œ ë°›ì€ ë°”ì´íŠ¸
let utf32: Vec<u32> = String::from_utf8_lossy(utf8_bytes)
    .chars()
    .map(|c| c as u32)
    .collect();
```    

### âœ… Rust â†’ Kotlin
- Rustì—ì„œ UTF-32ë¥¼ UTF-8ë¡œ ì¸ì½”ë”©
```rust
let utf32: Vec<u32> = vec![0x1F600, 0x0041]; // ğŸ˜€, A
let utf8: String = utf32.iter()
    .filter_map(|&c| std::char::from_u32(c))
    .collect();
```

- Kotlinì—ì„œ UTF-8 ë°”ì´íŠ¸ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜
```rust
val utf8Bytes: ByteArray = ... // Rustì—ì„œ ì „ë‹¬ë°›ì€ UTF-8
val str = utf8Bytes.toString(Charsets.UTF_8)
```

### ğŸ§  ì£¼ì˜ì‚¬í•­
- Kotlinì˜ CharëŠ” 16ë¹„íŠ¸ë¼ì„œ U+10000 ì´ìƒì˜ ë¬¸ìëŠ” ì„œë¡œê²Œì´íŠ¸ í˜ì–´ë¡œ í‘œí˜„ë¨
- ë¬¸ìì—´ ê¸¸ì´ ê³„ì‚° ì‹œ str.lengthëŠ” Char ê°œìˆ˜ì´ì§€ ì‹¤ì œ ìœ ë‹ˆì½”ë“œ ë¬¸ì ìˆ˜ê°€ ì•„ë‹˜ â†’ codePointCount ìœ í‹¸ í•„ìš”
- ì™¸ë¶€ êµí™˜ ì‹œ í•­ìƒ UTF-8ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ ì•ˆì „

## C#
Kotlinê³¼ ë§ˆì°¬ê°€ì§€ë¡œ C#ë„ ë‚´ë¶€ì ìœ¼ë¡œ UTF-16ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ì™¸ë¶€ êµí™˜ ì‹œ Encoding.UTF8.GetBytes() / GetString()ì„ í™œìš©í•´ì•¼ í•©ë‹ˆë‹¤.  

## C++
C++ì€ std::stringì„ UTF-8ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.  
Kotlinê³¼ êµí™˜í•  ë•Œë„ UTF-8ì„ ì¤‘ê°„ í¬ë§·ìœ¼ë¡œ ì“°ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.  

--- 
# ë¬¸ìì—´ í•¸ë“¤ë§ ì ˆì°¨
## ğŸ§­ ë‹¤êµ­ì–´/ë‹¤ì–¸ì–´ ë¬¸ìì—´ ì²˜ë¦¬ ì ˆì°¨ì  ë£°
### âœ… 1. ì¤‘ê°„ ì¸ì½”ë”©ì€ UTF-8ë¡œ í†µì¼
- Kotlin â†’ ì™¸ë¶€ ì‹œìŠ¤í…œ: String.toByteArray(Charsets.UTF_8)
- ì™¸ë¶€ ì‹œìŠ¤í…œ â†’ Kotlin: ByteArray.toString(Charsets.UTF_8)
  
### âœ… 2. ì…ì¶œë ¥ ì‹œ ì¸ì½”ë”© ëª…ì‹œ
- íŒŒì¼ ì €ì¥: File("file.txt").writeText(str, Charsets.UTF_8)
- íŒŒì¼ ì½ê¸°: File("file.txt").readText(Charsets.UTF_8)

### âœ… 3. ë‚´ë¶€ í‘œí˜„ì€ UTF-16 ìœ ì§€
- Kotlinì€ Javaì™€ ë™ì¼í•˜ê²Œ UTF-16 ê¸°ë°˜ String

### âœ… 4. ë³´ì¡° ë¬¸ì ì£¼ì˜
- CharëŠ” 16ë¹„íŠ¸ â†’ ì´ëª¨ì§€, ë³´ì¡° ë¬¸ìëŠ” 2ê°œë¡œ í‘œí˜„ë¨
- str.codePoints() (Java interop) ë˜ëŠ” str.toCharArray()ë¡œ ì²˜ë¦¬

### âœ… 5. ì •ê·œí™”(NFC/NFD) ê³ ë ¤
- Kotlinì€ Java API í™œìš© ê°€ëŠ¥: Normalizer.normalize(str, Normalizer.Form.NFC)

### âœ… 6. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë‹¤ì–‘í™”
- ASCII, í•œê¸€, ì´ëª¨ì§€, ë³´ì¡° ë¬¸ì, ì¡°í•©í˜• ë¬¸ì í¬í•¨

## ğŸ“Œ ìš”ì•½
- Kotlin ë¬¸ìì—´ì€ Javaì™€ ë™ì¼í•˜ê²Œ UTF-16 ê¸°ë°˜
- ì™¸ë¶€ ì–¸ì–´ì™€ êµí™˜ ì‹œ UTF-8 ë³€í™˜ì„ ë°˜ë“œì‹œ ê±°ì¹  ê²ƒ
- ë¬¸ìì—´ ê¸¸ì´ ê³„ì‚° ì‹œ ë³´ì¡° ë¬¸ì ì£¼ì˜
- ì •ê·œí™”ì™€ ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œ ì•ˆì •ì„± í™•ë³´

---

## ğŸ”¤ UTFâ€‘8 ì¸ì½”ë”© ê·œì¹™ (ë¹„íŠ¸ íŒ¨í„´)
UTFâ€‘8ì€ **8ë¹„íŠ¸ ë‹¨ìœ„(ë°”ì´íŠ¸)** ë¡œ ë¬¸ìë¥¼ í‘œí˜„í•˜ë©°, ê°€ë³€ ê¸¸ì´(1~4ë°”ì´íŠ¸) ì¸ì½”ë”©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ë¬¸ìì˜ ìœ ë‹ˆì½”ë“œ ì½”ë“œ í¬ì¸íŠ¸ ë²”ìœ„ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ë¹„íŠ¸ íŒ¨í„´ì´ ê²°ì •ë©ë‹ˆë‹¤.

- 1ë°”ì´íŠ¸ (U+0000 ~ U+007F)
```
0xxxxxxx
```

- 2ë°”ì´íŠ¸ (U+0080 ~ U+07FF)
```
110xxxxx 10xxxxxx
```

- 3ë°”ì´íŠ¸ (U+0800 ~ U+FFFF)
```
1110xxxx 10xxxxxx 10xxxxxx
```

- 4ë°”ì´íŠ¸ (U+10000 ~ U+10FFFF)
```
11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
```


## ğŸ“Œ ì„¤ëª…
- xëŠ” ì‹¤ì œ ì½”ë“œ í¬ì¸íŠ¸ ë¹„íŠ¸ê°€ ë“¤ì–´ê°€ëŠ” ìë¦¬
- ì²« ë°”ì´íŠ¸ì˜ **ì•ë¶€ë¶„ íŒ¨í„´(0, 110, 1110, 11110)** ì´ ê¸¸ì´ë¥¼ ê²°ì •
- ì´í›„ ë°”ì´íŠ¸ë“¤ì€ í•­ìƒ 10ìœ¼ë¡œ ì‹œì‘ â†’ ì—°ì† ë°”ì´íŠ¸ì„ì„ í‘œì‹œ
- ìµœëŒ€ í‘œí˜„ ë²”ìœ„ëŠ” ìœ ë‹ˆì½”ë“œ ì „ì²´ ì˜ì—­ U+10FFFF

## ğŸ§ª ì˜ˆì‹œ
- ë¬¸ì "A" (U+0041) â†’ 1ë°”ì´íŠ¸
```  
01000001
```
- ë¬¸ì "í•œ" (U+D55C) â†’ 3ë°”ì´íŠ¸
```
1110 1101  1001 0101  1000 1100
```
- ë¬¸ì "ğŸ˜€" (U+1F600) â†’ 4ë°”ì´íŠ¸
```
11110000 10011111 10011000 10000000
```
## ğŸ“Š UTF-8 ì¸ì½”ë”© ìš”ì•½ í‘œ

| ì½”ë“œ í¬ì¸íŠ¸ ë²”ìœ„      | ë°”ì´íŠ¸ ìˆ˜ | ë¹„íŠ¸ íŒ¨í„´ ì˜ˆì‹œ                          |
|-----------------------|-----------|-----------------------------------------|
| U+0000 ~ U+007F       | 1         | 0xxxxxxx                                |
| U+0080 ~ U+07FF       | 2         | 110xxxxx 10xxxxxx                       |
| U+0800 ~ U+FFFF       | 3         | 1110xxxx 10xxxxxx 10xxxxxx              |
| U+10000 ~ U+10FFFF    | 4         | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx     |


## ğŸ”¤ UTFâ€‘8 ê¸¸ì´ íŒë³„ ê·œì¹™

| ì²« ë°”ì´íŠ¸ íŒ¨í„´ | ì˜ë¯¸              | ì´ ë°”ì´íŠ¸ ìˆ˜ |
|----------------|-------------------|--------------|
| 0xxxxxxx       | ASCII ë¬¸ì        | 1ë°”ì´íŠ¸      |
| 110xxxxx       | í™•ì¥ ë¬¸ì ì‹œì‘    | 2ë°”ì´íŠ¸      |
| 1110xxxx       | ë” ê¸´ ë¬¸ì ì‹œì‘   | 3ë°”ì´íŠ¸      |
| 11110xxx       | ë³´ì¡° í‰ë©´ ë¬¸ì    | 4ë°”ì´íŠ¸      |

- ê·œì¹™ ìš”ì•½:
- 0 â†’ 1ë°”ì´íŠ¸
- 110 â†’ 2ë°”ì´íŠ¸
- 1110 â†’ 3ë°”ì´íŠ¸
- 11110 â†’ 4ë°”ì´íŠ¸
- ì´í›„ ë°”ì´íŠ¸ë“¤ì€ í•­ìƒ 10xxxxxx í˜•íƒœë¡œ ì‹œì‘ â†’ â€œì—°ì† ë°”ì´íŠ¸â€ì„ì„ í‘œì‹œ

## ğŸ§ª ì˜ˆì‹œ
- "A" (U+0041) â†’ 01000001 â†’ 0xxxxxxx â†’ 1ë°”ì´íŠ¸
- "í•œ" (U+D55C) â†’ 11101011 10010101 10001100 â†’ 1110xxxx â†’ 3ë°”ì´íŠ¸
- "ğŸ˜€" (U+1F600) â†’ 11110000 10011111 10011000 10000000 â†’ 11110xxx â†’ 4ë°”ì´íŠ¸

## ğŸ“Œ ìš”ì•½
UTFâ€‘8ì€ ì²« ë°”ì´íŠ¸ì˜ ì•ë¶€ë¶„ ë¹„íŠ¸ íŒ¨í„´ìœ¼ë¡œ ê¸¸ì´ë¥¼ êµ¬ë¶„í•˜ëŠ” ê·œì¹™ì„ ê°–ìŠµë‹ˆë‹¤:
0, 110, 1110, 11110 â†’ ê°ê° 1, 2, 3, 4ë°”ì´íŠ¸ ë¬¸ì.
ğŸ‘‰ ì´ ê·œì¹™ ë•ë¶„ì— UTFâ€‘8ì€ ìê¸° ì„¤ëª…ì (self-describing) ì¸ì½”ë”©ì´ë¼, ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì½ì„ ë•Œ  
ì–´ë””ì„œ ë¬¸ìê°€ ì‹œì‘í•˜ê³  ëë‚˜ëŠ”ì§€ ì‰½ê²Œ íŒë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ğŸ§‘â€ğŸ’» Kotlin ì½”ë“œ ì˜ˆì œ
```rust
fun utf8CharLength(firstByte: Int): Int {
    return when {
        // 0xxxxxxx â†’ 1ë°”ì´íŠ¸ (ASCII)
        (firstByte and 0b1000_0000) == 0 -> 1

        // 110xxxxx â†’ 2ë°”ì´íŠ¸
        (firstByte and 0b1110_0000) == 0b1100_0000 -> 2

        // 1110xxxx â†’ 3ë°”ì´íŠ¸
        (firstByte and 0b1111_0000) == 0b1110_0000 -> 3

        // 11110xxx â†’ 4ë°”ì´íŠ¸
        (firstByte and 0b1111_1000) == 0b1111_0000 -> 4

        else -> throw IllegalArgumentException("Invalid UTF-8 leading byte: $firstByte")
    }
}
```
```rust
fun main() {
    val bytes = listOf(
        0x41,       // 'A' â†’ 0xxxxxxx â†’ 1ë°”ì´íŠ¸
        0xC2,       // 'Ã‚' â†’ 110xxxxx â†’ 2ë°”ì´íŠ¸
        0xE3,       // 'Ã£' â†’ 1110xxxx â†’ 3ë°”ì´íŠ¸
        0xF0        // ğŸ˜€ â†’ 11110xxx â†’ 4ë°”ì´íŠ¸
    )

    for (b in bytes) {
        println("Byte: 0x${b.toString(16)} â†’ UTF-8 length = ${utf8CharLength(b)}")
    }
}
```

### ğŸ“Œ ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ
```
Byte: 0x41 â†’ UTF-8 length = 1
Byte: 0xc2 â†’ UTF-8 length = 2
Byte: 0xe3 â†’ UTF-8 length = 3
Byte: 0xf0 â†’ UTF-8 length = 4
```

## ğŸ§  ì„¤ëª…
- and ì—°ì‚°(&)ìœ¼ë¡œ íŠ¹ì • ë¹„íŠ¸ íŒ¨í„´ì„ ë§ˆìŠ¤í¬í•©ë‹ˆë‹¤.
- ì˜ˆ: firstByte and 0b1110_0000 â†’ ìƒìœ„ 3ë¹„íŠ¸ë§Œ ì¶”ì¶œ
- == 0b1100_0000 â†’ íŒ¨í„´ì´ 110ì¸ì§€ í™•ì¸
- ì´ëŸ° ë°©ì‹ìœ¼ë¡œ UTFâ€‘8ì˜ **leading bits ê·œì¹™(0, 110, 1110, 11110)** ì„ íŒë³„í•©ë‹ˆë‹¤.

